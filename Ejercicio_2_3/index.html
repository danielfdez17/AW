<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
    <link rel="stylesheet" href="styles.css">

</head>
<body>

    
    <!-- Formulario -->
    <div id="formulario" class="main-container">
        <h1>Suscripción a la revista</h1>

        <!-- Datos personales -->
        <fieldset>
            <legend>Datos personales</legend>
            
            <form id="Datos-personales">
                <div class="container">
                    <label for="nombre">Nombre</label><br>
                    <input type="text" name="nombre" id="nombre" placeholder="Escribe tu nombre">
                </div>  

                <div class="container">
                    <label for="primer_apellido">Primer apellido</label><br>
                    <input type="text" name="primer_apellido" id="primer_apellido" placeholder="Escribe tu primer apellido">
                </div>

                <div class="container">
                    <label for="segundo_apellido">Segundo apellido</label><br>
                    <input type="text" name="segundo_apellido" id="segundo_apellido" placeholder="Escribe tu segundo apellido">
                </div>
                
                <div class="container">
                    <label for="direccion">Dirección</label><br>
                    <input type="text" name="direccion" id="direccion" placeholder="Escribe tu direccion">
                </div>

                <div class="container">
                    <label for="e_mail">E-mail</label><br>
                    <input type="email" name="e_mail" id="e_mail" placeholder="Escribe tu e-mail">
                </div>

                <div class="container">
                    <label for="contrasena">Contraseña</label><br>
                    <input type="password" name="contrasena" id="contrasena" placeholder="Escribe tu contraseña">
                </div>   

                <p>Sexo</p>
                <!--Añadimos tabindex = "0" para que se pueda 'tabulear' sobre el label-->
                <div class="container-checkbox">
                    <input type="radio" id="varon" name="sexo" value="varon">
                    <label for="varon" tabindex="0">Varón</label>

                    <input type="radio" id="mujer" name="sexo" value="mujer">
                    <label for="mujer" tabindex="0">Mujer</label>
                </div>
            </form>

        </fieldset>

        <!-- Nivel de estudios e intereses -->
        <fieldset>
            <legend>Nivel de estudios e intereses</legend>
            
            <form id="Nivel-de-estudios-e-intereses">
                <div class="container">
                    <label for="estudios">Nivel de estudios</label>
                    <select id="estudios" name="estudios">
                        <option value="Certificado escolar">Certificado escolar</option>
                        <option value="Estudios secundarios">Estudios secundarios</option>
                        <option value="Estudios universitarios">Estudios universitarios</option>
                    </select>
                </div>
                
                
                <label>Recibir artículos sobre los siguientes temas:</label>
                <!--Añadimos tabindex = "0" para que se pueda 'tabulear' sobre el label-->
                <div class="container-checkbox">
                    <input type="checkbox" id="Musica" name="interes" value="Música">
                    <label for="Musica" tabindex="0">Música</label>

                    <input type="checkbox" id="Deportes" name="interes" value="Deportes">
                    <label for="Deportes" tabindex="0">Deportes</label>

                    <input type="checkbox" id="Cine" name="interes" value="Cine">
                    <label for="Cine" tabindex="0">Cine</label>

                    <input type="checkbox" id="Libros" name="interes" value="Libros">
                    <label for="Libros" tabindex="0">Libros</label>

                    <input type="checkbox" id="Ciencia" name="interes" value="Ciencia">
                    <label for="Ciencia" tabindex="0">Ciencia</label>
                </div>
            </form>
        </fieldset>

        <hr class="divisor">

        <!-- Datos sobre la revista -->
        <fieldset>
            <legend>Datos sobre la revista</legend>

            <form id="Datos-sobre-la-revista">
                <div class="container">
                    <label for="nombre">Frecuencia con la que se recibirá la revista</label><br>
                    <select id="frecuencia" name="frecuencia">
                        <option value="Semanal">Semanal</option>
                        <option value="Mensual">Mensual</option>
                    </select>
                </div>
                
                <div class="container">
                    <label for="archivo">Puedes mandar tu articulo sobre cualquier tema de los que tratamos. 
                    Nosotros lo valoraremos para que pueda ser publicado. mandar articulo:</label><br>
                    <input type="file" id="archivo" name="archivo">
                </div>

                <div class="container">
                    <label for="comentario">Si deseas mandar simplemente una opcion o comentario escibelo aquí</label><br>
                    <textarea name="comentario" id="comentario" placeholder="Escribe tu comentario aquí" rows="10"></textarea> 
                </div>
            </form>
        </fieldset>

        <!-- Comenzar de nuevo -->
        <fieldset>
            <legend>Comenzar de nuevo</legend>
            <p>Borrar todos los datos del formulario y volver a empezar: </p>
            <button onclick="resetFormulario()">Borrar todo</button>
        </fieldset>

        <!-- Enviar -->
        <fieldset>
            <legend>Enviar</legend>
            <p>Enviar formulario por correo electronico: Al pulsar en el botón se abrirá la 
            pagina de envió de correo: en esa página pulsa en enviar:</p>
            <button onclick="mostrarResultados()" type="submit">Enviar por correo</button>

        </fieldset>
    </div>


    <!-- Resultados -->
    <div id="resultados" class="main-container">
        <fieldset>
            <h1>Resultados</h1>
            <div>
                <h2>Datos Personales</h2>
                <p>Nombre: <span id="nombreResultado"></span></p>
                <p>Primer Apellido: <span id="primer_apellidoResultado"></span></p>
                <p>Segundo Apellido: <span id="segundo_apellidoResultado"></span></p>
                <p>Direccion: <span id="direccionResultado"></span></p>
                <p>E-mail: <span id="emailResultado"></span></p>
                <p>Contraseña: <span id="contrasenaResultado"></span></p>
                <p>Sexo: <span id="sexoResultado"></span></p>
            </div>
            <hr>
            <div>
                <h2>Nivel de estudios e intereses</h2>
                <p>Nivel de estudios <span id="nivelResultado"></span></p>
                <p>Temas: <span id="temasResultado"></span></p>
            </div>
            <hr>
            <div>
                <h2>Datos sobre la revista</h2>
                <p>Frecuencia <span id="frecuenciaResultado"></span></p>
                <p>Archivo: <span id="archivoResultado"></span></p>
                <p>Opinion: <span id="comentarioResultado"></span></p>
            </div>

            <button onclick="volverFormulario()" type="submit">Volver al formulario</button>
        </fieldset>   

    </div>

    <!-- JavaScript -->
    <script>
        //Funcion de borrar todo
        function resetFormulario() {

            //Recogemos todos los formularios que existen en el html
            const forms = document.querySelectorAll('form');

            //Aplicamos una funcion for each, que va reseteando cada uno de los formularios encontrados
            forms.forEach(form => form.reset());
        }

        function volverFormulario()
        {
            document.getElementById("formulario").style.display = 'flex';
            document.getElementById("resultados").style.display = 'none';
        }

        //Recopilar datos
        function mostrarResultados() {

            //Dejar de mostrar formulario y pasar a los resultados
            document.getElementById("formulario").style.display = 'none';
            document.getElementById("resultados").style.display = 'flex';

            //Resultados relacionados (Datos personales)
            document.getElementById('nombreResultado').textContent = document.getElementsByName('nombre')[0].value;
            document.getElementById('primer_apellidoResultado').textContent = document.getElementsByName('primer_apellido')[0].value;
            document.getElementById('segundo_apellidoResultado').textContent = document.getElementsByName('segundo_apellido')[0].value;
            document.getElementById('direccionResultado').textContent = document.getElementsByName('direccion')[0].value;
            document.getElementById('emailResultado').textContent = document.getElementsByName('e_mail')[0].value;
            document.getElementById('contrasenaResultado').textContent = document.getElementsByName('contrasena')[0].value;

            var sexo = document.querySelector('input[name="sexo"]:checked');
            document.getElementById('sexoResultado').textContent = sexo ? sexo.value : 'No se ha registrado sexo';

            //Resultados relacionados (Nivel de estudios e intereses)
            document.getElementById('nivelResultado').textContent = document.getElementsByName('estudios')[0].value;
            var datos = document.querySelectorAll('.container-checkbox input[name="interes"]:checked');

            var salida_intereses = '';
            if(!datos)
                salida_intereses = "No se han registrado intereses";
            else
            {
                datos.forEach(dato =>
                {
                    salida_intereses += dato.value + " ";      
                });
            }
            document.getElementById('temasResultado').textContent = salida_intereses;

            //Resultados relacionados (Datos sobre la revista)
            document.getElementById('frecuenciaResultado').textContent = document.getElementsByName('frecuencia')[0].value;
            var archivo = document.getElementsByName('archivo')[0];

            document.getElementById('archivoResultado').textContent = archivo.files[0] ? archivo.files[0].name : 'No se ha especificado archivo';
            document.getElementById('comentarioResultado').textContent = document.getElementsByName('comentario')[0].value;
        }


        //Esperamos a que cargen todo el documento
        document.addEventListener('DOMContentLoaded', function () {

        //Busca todos los container-checkbox label
        document.querySelectorAll('.container-checkbox label').forEach(label => {

            //Añade un listener para que al pulsar cualquier letra salte
            label.addEventListener('keydown', function(event) {

                //Si la letra pulsada es 'Enter' o 'Espacio' entra al if
                if (event.key === 'Enter' || event.key === ' ') {
                    //Simulamos un click sobre el elemento
                    label.click()

                    //Evitamos que al hacer espacio la pagina avance, que sería su comportamiento predeterminado
                    event.preventDefault();
                }
            });
        });
        });
    </script>

</body>
</html>